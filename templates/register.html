<!doctype html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>íŒ€ ê²Œì‹œíŒ</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
  <style>
  .topnav {
    background-color: #111827;
    color: white;
    padding: 10px 20px;
    display: flex;
    align-items: center;
    position: relative;
  }
  .topnav .menu {
    position: relative;
  }
  .topnav a {
    color: #e5e7eb;
    text-decoration: none;
    font-weight: 500;
    font-size: 14px;
  }
  .submenu {
    display: none;
    position: absolute;
    background-color: #1f2937;
    min-width: 180px;
    box-shadow: 0 8px 16px rgba(0,0,0,0.3);
    z-index: 10;
    border-radius: 8px;
    padding: 8px 0;
  }
  .submenu a {
    display: block;
    padding: 8px 16px;
    color: #e5e7eb;
  }
  .submenu a:hover {
    background-color: #374151;
  }
  .menu:hover .submenu {
    display: block;
  }
    body {
      margin: 0;
      min-height: 100vh;
      font-family: -apple-system, BlinkMacSystemFont, 'Apple SD Gothic Neo', system-ui, sans-serif;
      color: #2b2e3a;
      background:
        radial-gradient(circle at 20% 20%, rgba(79,107,237,0.12) 0%, rgba(255,255,255,0) 60%),
        radial-gradient(circle at 80% 10%, rgba(0,195,106,0.10) 0%, rgba(255,255,255,0) 60%),
        radial-gradient(circle at 50% 80%, #f5f6fa 0%, #f5f6fa 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 24px 16px 40px;
    }

    .shell {
      width: 100%;
      max-width: 380px;
      position: relative;
    }

    /* ë’¤ìª½ ê¸€ë¡œìš° ë§ / ì•½ê°„ì˜ ë¸Œëœë”© ëŠë‚Œ */
    .halo {
      position: absolute;
      inset: 0;
      filter: blur(40px);
      background:
        radial-gradient(circle at 30% 30%, rgba(79,107,237,0.28) 0%, rgba(79,107,237,0) 70%),
        radial-gradient(circle at 70% 20%, rgba(0,195,106,0.25) 0%, rgba(0,195,106,0) 70%);
      opacity: 0.28;
      border-radius: 32px;
      pointer-events: none;
    }

    .card {
      position: relative;
      background: #fff;
      border-radius: 24px;
      border: 1px solid rgba(0,0,0,0.06);
      box-shadow:
        0 32px 64px rgba(0,0,0,0.08),
        0 4px 16px rgba(0,0,0,0.04);
      padding: 24px 24px 28px;
      z-index: 1;
    }

    /* ìƒë‹¨ í—¤ë” ì˜ì—­ */
    .badge-row {
      display: flex;
      align-items: flex-start;
      justify-content: space-between;
      margin-bottom: 16px;
    }

    .badge {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      background: rgba(0,195,106,0.08);
      color: #00a86b;
      font-size: 11px;
      font-weight: 600;
      line-height: 1.3;
      padding: 5px 8px 5px 8px;
      border-radius: 8px;
      border: 1px solid rgba(0,195,106,0.22);
    }

    .step-hint {
      font-size: 11px;
      line-height: 1.4;
      font-weight: 500;
      color: #7e8099;
      background: rgba(0,0,0,0.04);
      border-radius: 8px;
      padding: 4px 8px;
      border: 1px solid rgba(0,0,0,0.06);
    }

    .title {
      font-size: 20px;
      font-weight: 600;
      line-height: 1.35;
      letter-spacing: -0.03em;
      color: #2b2e3a;
      margin-bottom: 6px;
      display: flex;
      flex-wrap: wrap;
      align-items: baseline;
      gap: 8px;
    }

    .subtitle {
      font-size: 13px;
      line-height: 1.5;
      color: #7e8099;
      margin-bottom: 20px;
    }

    /* flash ë©”ì‹œì§€ */
    .flash-area {
      margin-top: 12px;
      margin-bottom: 4px;
    }
    .flash-msg {
      background:#fff3cd;
      color:#856404;
      border:1px solid #ffeeba;
      border-radius:8px;
      font-size:12px;
      line-height:1.4;
      padding:8px 10px;
      margin-bottom:6px;
      box-shadow:0 12px 24px rgba(0,0,0,0.07);
    }

    form {
      display: flex;
      flex-direction: column;
      gap: 16px;
    }

    .field {
      display: flex;
      flex-direction: column;
      gap: 6px;
    }

    .field-top {
      display: flex;
      align-items: baseline;
      justify-content: space-between;
    }

    .label-main {
      font-size: 12px;
      font-weight: 500;
      color: #555a75;
    }

    .label-sub {
      font-size: 11px;
      font-weight: 400;
      color: #a0a2b8;
    }

    .input-wrap {
      position: relative;
      display: flex;
      justify-content: flex-start;
    }

    .input-wrap input {
      width: 100%;
      border-radius: 12px;
      border: 2px solid rgba(0,0,0,0.08);
      background: #fff;
      font-size: 15px;
      font-weight: 500;
      line-height: 1.4;
      color: #2b2e3a;
      padding: 12px 14px;
      outline: none;
      transition: all 0.15s ease;
      box-shadow: 0 12px 24px rgba(0,0,0,0.04);
    }

    .input-wrap input:focus {
      border-color: #00a86b;
      box-shadow: 0 20px 36px rgba(0,168,107,0.28);
    }

    /* password strength bar ì‹œê° ìš”ì†Œ */
    .strength-row {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-top: 4px;
      min-height: 10px;
    }

    .bar-pack {
      display: flex;
      gap: 4px;
    }

    .bar {
      width: 28px;
      height: 4px;
      background: rgba(0,0,0,0.07);
      border-radius: 999px;
      transition: background 0.15s ease;
    }

    .bar.active-weak {
      background: #ff937a;
    }
    .bar.active-mid {
      background: #ffd46a;
    }
    .bar.active-strong {
      background: #00c36a;
    }

    .strength-label {
      font-size: 11px;
      font-weight: 500;
      line-height: 1.4;
      color: #7e8099;
    }

    .submit-btn {
      appearance: none;
      border: 0;
      width: 100%;
      border-radius: 12px;
      background: linear-gradient(135deg, #00c36a 0%, #12d47e 100%);
      color: #fff;
      font-size: 15px;
      font-weight: 600;
      line-height: 1.3;
      padding: 13px 16px;
      cursor: pointer;
      box-shadow: 0 20px 40px rgba(0,195,106,0.4);
      transition: all 0.12s ease;
    }

    .submit-btn:hover {
      box-shadow: 0 24px 44px rgba(0,195,106,0.5);
      transform: translateY(-1px);
    }

    .footer-area {
      margin-top: 20px;
      font-size: 12px;
      line-height: 1.5;
      color: #7e8099;
      text-align: center;
    }

    .footer-area a {
      color: #4f6bed;
      font-weight: 600;
      text-decoration: none;
    }

    .last-line {
      font-size: 11px;
      line-height: 1.4;
      color: #a0a2b8;
      text-align: center;
      margin-top: 24px;
    }
  </style>
</head>
<body>
  <nav class="topnav">
    <div class="menu">
      <a href="{{ url_for('dashboard') }}">ğŸ  ë‚´ ë©”ë‰´</a>
      <div class="submenu">
        <a href="{{ url_for('profiles') }}">ğŸ‘¥ íŒ€ ìƒíƒœíŒ</a>
        <a href="{{ url_for('weekly') }}">ğŸ“… ì£¼ê°„ í˜„í™©íŒ</a>
        <a href="{{ url_for('monthly') }}">ğŸ“Š ì›”ê°„ í˜„í™©íŒ</a>
        <a href="{{ url_for('board') }}">ğŸ’¬ íŒ€ ê²Œì‹œíŒ</a>
        <a href="{{ url_for('change_password') }}">ğŸ” ë¹„ë°€ë²ˆí˜¸ ë³€ê²½</a>
        <a href="{{ url_for('logout') }}">ğŸšª ë¡œê·¸ì•„ì›ƒ</a>
      </div>
    </div>
  </nav>
  <div class="shell">
    <div class="halo"></div>

    <section class="card">
      <div class="badge-row">
        <div class="badge">
          <span>âœ¨ ì‹ ê·œ íŒ€ì› ë“±ë¡</span>
          <span style="font-weight:500; font-size:10px; color:#00a86b;">welcome</span>
        </div>
        <div class="step-hint">step 1 / 1</div>
      </div>

      <div class="title">íšŒì›ê°€ì…</div>
      <div class="subtitle">íŒ€ ê·¼íƒœ ì‹œìŠ¤í…œì— ì°¸ì—¬í•  ê³„ì •ì„ ë§Œë“¤ì–´ìš”. ì´ ì •ë³´ëŠ” ì›”ê°„/ì£¼ê°„ í†µê³„ì™€ íŒ€ ìƒíƒœíŒì— ì‚¬ìš©ë¼ìš”.</div>

      {% with messages = get_flashed_messages() %}
        {% if messages %}
          <div class="flash-area">
          {% for m in messages %}
            <div class="flash-msg">{{ m }}</div>
          {% endfor %}
          </div>
        {% endif %}
      {% endwith %}

      <form method="post">
        <!-- ì•„ì´ë”” -->
        <div class="field">
          <div class="field-top">
            <div class="label-main">ì•„ì´ë””</div>
            <div class="label-sub">ì˜ˆ: dongguk, user7</div>
          </div>
          <div class="input-wrap">
            <input type="text" name="username" placeholder="ì•„ì´ë”” ì…ë ¥" autocomplete="username" required>
          </div>
        </div>

        <!-- ë¹„ë°€ë²ˆí˜¸ -->
        <div class="field">
          <div class="field-top">
            <div class="label-main">ë¹„ë°€ë²ˆí˜¸</div>
            <div class="label-sub">íŒ€ì›ì´ ë³¼ ìˆ˜ ì—†ì–´ìš”</div>
          </div>
          <div class="input-wrap">
            <input id="pw1" type="password" name="password" placeholder="ë¹„ë°€ë²ˆí˜¸" autocomplete="new-password" required>
          </div>
          <div class="strength-row">
            <div class="bar-pack">
              <div class="bar" id="bar1"></div>
              <div class="bar" id="bar2"></div>
              <div class="bar" id="bar3"></div>
            </div>
            <div class="strength-label" id="strengthLabel">ì•ˆì „ë„ í™•ì¸ ì¤‘...</div>
          </div>
        </div>

        <!-- ë¹„ë°€ë²ˆí˜¸ í™•ì¸ -->
        <div class="field">
          <div class="field-top">
            <div class="label-main">ë¹„ë°€ë²ˆí˜¸ í™•ì¸</div>
            <div class="label-sub">ë™ì¼í•˜ê²Œ ì…ë ¥í•´ ì£¼ì„¸ìš”</div>
          </div>
          <div class="input-wrap">
            <input id="pw2" type="password" name="password2" placeholder="ë‹¤ì‹œ í•œ ë²ˆ ì…ë ¥" autocomplete="new-password" required>
          </div>
        </div>

        <button type="submit" class="submit-btn">ê°€ì… ì™„ë£Œí•˜ê¸°</button>
      </form>

      <div class="footer-area">
        ì´ë¯¸ ê³„ì •ì´ ìˆë‹¤ë©´?
        <a href="{{ url_for('login') }}">ë¡œê·¸ì¸ìœ¼ë¡œ ì´ë™</a>
      </div>

      <div class="last-line">ì´ ì´ë¦„ê³¼ ìƒíƒœë©”ì‹œì§€ëŠ” íŒ€ ìƒíƒœíŒì— í‘œì‹œë¼ìš” ğŸŒ±</div>
    </section>
  </div>

  <script>
    // ë§¤ìš° ê°€ë²¼ìš´ ë¹„ë°€ë²ˆí˜¸ ê°•ë„ ì²´ì»¤ (í”„ë¡ íŠ¸ì—”ë“œ í‘œì‹œìš©)
    const pw1 = document.getElementById('pw1');
    const bar1 = document.getElementById('bar1');
    const bar2 = document.getElementById('bar2');
    const bar3 = document.getElementById('bar3');
    const strengthLabel = document.getElementById('strengthLabel');

    function checkStrength(v) {
      let score = 0;

      // ê¸¸ì´
      if (v.length >= 6) score++;
      if (v.length >= 10) score++;

      // ë‹¤ì–‘í•œ ë¬¸ìì¡°í•©: ìˆ«ì/ë¬¸ì/íŠ¹ìˆ˜ë¬¸ì í˜¼í•© ì—¬ë¶€ ëŒ€ì¶© ì²´í¬
      const hasNum = /[0-9]/.test(v);
      const hasAlpha = /[a-zA-Z]/.test(v);
      const hasEtc = /[^a-zA-Z0-9]/.test(v);
      if ((hasNum && hasAlpha) || (hasNum && hasEtc) || (hasAlpha && hasEtc)) score++;

      return Math.min(score, 3); // 0~3 ì‚¬ì´
    }

    function renderStrength(level) {
      // ì´ˆê¸°í™”
      bar1.className = 'bar';
      bar2.className = 'bar';
      bar3.className = 'bar';

      if (level === 0) {
        strengthLabel.textContent = 'ë„ˆë¬´ ì§§ì•„ìš”';
        return;
      }
      if (level === 1) {
        bar1.classList.add('active-weak');
        strengthLabel.textContent = 'ì¡°ê¸ˆ ì•½í•´ìš”';
        return;
      }
      if (level === 2) {
        bar1.classList.add('active-mid');
        bar2.classList.add('active-mid');
        strengthLabel.textContent = 'ë³´í†µì´ì—ìš”';
        return;
      }
      if (level === 3) {
        bar1.classList.add('active-strong');
        bar2.classList.add('active-strong');
        bar3.classList.add('active-strong');
        strengthLabel.textContent = 'ì•„ì£¼ ì¢‹ì•„ìš” âœ¨';
        return;
      }
    }

    pw1.addEventListener('input', () => {
      const v = pw1.value;
      const lvl = checkStrength(v);
      renderStrength(lvl);
    });

    // ì´ˆê¸° ìƒíƒœ
    renderStrength(0);
  </script>
</body>
</html>